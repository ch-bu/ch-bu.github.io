function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}();define(["react","d3","jquery"],function(t,e,r){var a=function(a){function n(t){_classCallCheck(this,n);var r=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return t.mainView.listenTo(t.mainView.textModel,"change:charDict",r.dataChanged.bind(r)),e.select(window).on("resize",r.windowResized.bind(r)),r}return _inherits(n,a),_createClass(n,[{key:"render",value:function(){return t.createElement("svg",{width:this.props.width,height:this.props.height})}},{key:"windowResized",value:function(){var t=e.select("svg"),a=r("#data-display").height(),n=r("#data-display").width(),i=a-this.state.margin.top-this.state.margin.bottom,o=n-this.state.margin.left-this.state.margin.right;t.attr("height",a).attr("width",n);e.select("#frame").attr("width",o).attr("height",i);e.select(".axis-x").attr("transform","translate(0,"+i+")"),this.state.y.range[0];var s=e.scaleBand().domain("abcdefghijklmnopqrstuvwxyz".split("")).range([0,o]);t.select(".axis-x").call(e.axisBottom(s));var l=e.scaleBand().domain(Array.apply(null,{length:100}).map(Number.call,Number)).range([i,0]).paddingInner([.1]);e.select("#frame").selectAll("rect").attr("x",function(t){return s(t[0])}).attr("y",function(t){return l(t[1])}).attr("width",o/28).attr("height",i/140),this.setState({width:o,height:i,x:s,y:l})}},{key:"componentDidMount",value:function(){var t=e.select("svg"),r={top:30,right:10,bottom:30,left:20},a=t.attr("width")-r.left-r.right,n=t.attr("height")-r.top-r.bottom,i=t.append("g").attr("id","frame").attr("width",a).attr("height",n).attr("transform","translate("+r.left+","+r.top+")"),o=e.scaleBand().domain("abcdefghijklmnopqrstuvwxyz".split("")).range([0,a]),s=e.axisBottom(o);i.append("g").attr("class","axis axis-x").attr("transform","translate(0,"+n+")").call(s);var l=e.scaleBand().domain(Array.apply(null,{length:100}).map(Number.call,Number)).range([n,0]).paddingInner([.1]);this.setState({svg:t,x:o,y:l,height:n,width:a,margin:r})}},{key:"dataChanged",value:function(){var t=this,r=this.props.mainView.textModel.get("charDict"),a=e.select("#frame").selectAll("rect").data(r,function(t){return t[2]});e.max(r,function(t){return t[1]});a.enter().append("rect").attr("x",function(e){return t.state.x(e[0])}).attr("y",0).attr("fill",function(){return"#"+Math.floor(16777215*Math.random()).toString(16)}).attr("width",this.state.width/28).attr("height",this.state.height/140).transition().duration(200).attr("y",function(e){return t.state.y(e[1])}),a.exit().remove()}}]),n}(t.Component);return a});